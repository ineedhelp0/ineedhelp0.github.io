<?php
echo <<<_END
	<html>
	<head>
	<title>УЛУЧШЕНИЕ ухух</title>
	</head>
	<body>
	<form method = 'post' action = 'test2.php' enctype = 'multipart/form-data'>
	Выбирите файл с разрешением (png,gif,jpg,jpeg): <input type = 'file' name = 'filename' size = '10' >
	<input   type = 'submit' value = 'Загрузить' >
	<input  type = 'reset' value = 'Удалить'>
	</form>
_END;
if ($_FILES) {
	$name = $_FILES['filename']['name'];
	$name = preg_replace("[^A-Za-Z0-9.]","",$name);
	switch ($_FILES['filename']['type']) {
		case 'image/png':
			$e = 'png';
			break;
		case 'image/gif':
			$e = 'gif';
			break;
		case 'image/jpg':
			$e = 'jpg';
			break;
		case 'image/jpeg':
			$e = 'jpeg';
			break;
		default:
			$e = '';
			break;
	}
	if ($e) {
		$n = "image.$e";
		move_uploaded_file($_FILES['filename']['tmp_name'], $n);
		echo "Загружен файл '$name' с расширением '$e'<br>";
		echo "<img src = '$n'>";
	} else {
		echo "недопустимый файл $name";
	}
} else {
	echo "Загрузки заображения не произошло";
}
echo "</body></html>";
